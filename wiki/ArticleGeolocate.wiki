#summary Running a geolocation analysis and re-importing the results in Tagbase

<wiki:toc max_depth="2" />

= Installation of R and geolocation packages =

*[http://www.r-project.org/ R]* is being very rapidly developed and geolocation package may sometimes lag in catching up with fundamental changes made in *[http://www.r-project.org/ R]* that renders some older routines non-functional. To take a conservative approach, we recommend the following installation:

  * R-2.8.1
	
		http://cran.r-project.org/bin/windows/base/old/2.8.1/
  
  * Geolocation packages
  
		http://tagbase.googlecode.com/files/library.zip
  
Move the extracted package folders into the R library folder. To find out where your R library folder is located, type in R:

	`library()`

And look for something like this:

	`"Packages in library 'C:/R/R-2.8.1/library':`

= To follow along... =

  * Make sure you have imported the sample dataset. Refer to the *StarterKit* to help you achieve that.
  
  * Inform yourself with an overview of the geolocation methods:

    * http://www.soest.hawaii.edu/PFRP/nov07mtg/nielsen.pdf *

= Conducting a sample run of Trackit=

  * Tagbase *[ArticleExport exports]* prepares comma-separated files (e.g. `Tag2light.csv` and `Tag2sst.csv`) that are formatted for use with Trackit.
  
  * A text-file script (`script.R`) with commands for R is also generated by Tagbase. You can locate your copy here:
  
  `C:\Tagbase\tagfiles\simulated\export\script.R`
  
  Right-click to *Open with* a Notepad or any text file editor to see the code
  
  {{{
  # Note: delete the hash sign (#) to uncomment a line

# Preparation; define working directory
setwd("C:/Tagbase/tagfiles/simulated/export")
# Save data to
savefile <- "C:/Tagbase/tagfiles/simulated/outputs/simtracks.Rdata"

# Main code:
library(trackit)
track <- read.csv('Tag2light.csv')
# sst <- read.csv('Tag2sst.csv') # Using only light
pt <- prepit(track, fix.first=c(202.203,32.87,2008,6,16,0,0,0),
		    fix.last=c(201.34,33.81,2008,7,4,0,0,0), scan=F)
tag2 <- trackit(pt, D.ph=2, D.i=400)

track <- read.csv('Tag3light.csv')
# sst <- read.csv('Tag3sst.csv') # Using only light
pt <- prepit(track, fix.first=c(202.52,32.68,2002,6,29,0,0,0),
		    fix.last=c(201.154,34.34,2002,10,25,0,0,0), scan=F)
tag3 <- trackit(pt, ss3.ph=4)

save(tag2,tag3,file=savefile) 
  }}}
  
  * Start up R, copy-and-paste lines or block of code to run the commands