#summary Mapping with MapWinGis in Tagbase

<wiki:toc max_depth="2" />

= Introduction =

This is one of the most exciting integration in Tagbase, with diverse functionalities from shapefile generation, oceanographic data download to interactive data lookup. We are actively gathering comments on what other capabilities we should add or expand.

= Requirements =

 * Make sure you have installed all the necessary plugins. See   *[HowToInstallPlugins Plugins Installation]* for details.

 * We only support [http://mapwingis.codeplex.com/releases/view/70023 MapWinGis 4.7] right now. More recent versions involve frequent updates to their basic functions, so we are sticking to an older, stable version for now.

= Limitations = 

 * Tagbase implements an ActiveX control of !MapWinGis and only intends to offer some basic GIS visualization. We can't create publication-quality maps, although we have plans to integrate Tagbase and GMT plotting routine in the future for static map production.

 * If you plan to conduct more sophisticated GIS operations, we recommend using Tagbase to help you generate the shapefiles you need. You can build a shapefile from tracks or any queries with two required fields, *`longitude`* and *`latitude`*.

= Starting Map Window =

 * From *Forms*, double-click to open the form, `MapWindow`

 * You also need to have tracking data imported in Tagbase. They can be raw geolocation positions, Argos/GPS positions or analysed tracks.

= Major functionalities =

http://tagbase.googlecode.com/svn/trunk/images/mapwindow.jpg

=== [ArticleMap#1._Shapefile_generation 1. Shapefile generation] ===
=== [ArticleMap#2._Basic_zooming,_browsing_and_layering 2. Basic zooming, browsing and layering]===
=== [ArticleMap#3._Labeling_or_coloring_shapefile_shapes_by_their_attributes 3. Labeling or coloring shapefile shapes by their attributes]===
=== [ArticleMap#4._Highlighting_shapefile_shapes_with_filters 4. Highlighting shapefile shapes with filters]===
=== [ArticleMap#5._Using_track_positions_to_query_tag_data 5. Using track positions to query tag data (the Identify Feature button)]===
=== [ArticleMap#6._Obtaining_satellite_imagery_across_the_Internet 6. Obtaining satellite imagery across the Internet]===
=== [ArticleMap#7._Showing_data_within_a_temporal_window_of_a_satellite_image 7. Showing data within a temporal window of a satellite image]===

  {{{
  Hint - The MapWindow form has tool tips and status bar messages. 
         Hover your mouse over a button and hold for a second to show the tip.
         It will tell you what that button does
  }}}

== 1. Shapefile generation ==
_You make the necessary selections from left to right:_
 * *Create shapefile in folder* - type out the directory where you want to save the generated shapefile. You can also double-click to start the Browse-To dialog.
 * *Analysed positions* - track data are obtained from `Analysis_Outputs` table. You need to have imported track data through procedures described in [ArticleGeolocate Running and importing a geolocation analysis]; or when you import a `LightLoc.csv` with saved results from the [ArticleWcDap#Utilizing_Kalman_filter/_Trackit_interfaces_in_GPE Kalman filter interface] of Wildlife Computers GPE software
 * *Raw positions* - track data from standard manufacturer processing in the following tables: `Proc_WC_Locations`, `Proc_SPOT_Locations`, `Proc_LTD_DayLog`, `Proc_Archival_Location`, `Proc_MT_Location`.
 * *User-defined query* - you can make a shapefile from a query or table, as long as you have 2 required fields: `longitude` and `latitude`. Other fields in your query/table will be saved to the shapefile as attributes. Note however, there is a 10-character limit to the names of attributes (`MapWinGis` limitation). Try use the [ArticleQuery#Query_1_-_Extract_time_series_data_during_a_specific_month alias technique] of a query to get around this problem.
 * *Any* or other names of geolocation methods (e.g. trackit)- this is only applicable to `Analysed positions`. This control is populated with the records of the `AnalysisMethod` field in the `AnalysisInfo` table, where the `AnalysisType` field is `geolocation`.
 * *Add* - click this button to generate your shapefile. You will be prompted to enter a filename, click OK when you have done so. 
 * *Interpolate missing days* - checking this box will interpolate positions for timestamps in your tag data that have no associated latitude & longitude information. An attribute field `FlagGap` will be added to the shapefile, where original track positions are assigned a value of 0 and interpolated positions are assigned a value greater than 0. 
 * *Estimate sunrise/ sunset* - checking this box will approximate sunrise/sunset times based on date, latitude & longitude information and [http://www.srrb.noaa.gov/highlights/sunrise/sunrise.html NOAA computational routines]. This option is only available when `Interpolate missing days` is turned on.

== 2. Basic zooming, browsing and layering ==

 * Make sure you click on the name of a shapefile to highlight a layer before you perform an operation on the layer

 * The order in which the shapefiles appear will remain in the order you have added them i.e. a persistent ordering. This constraint is present due to the need to ensure compatibility with older MS Access versions.

 _Zooming and browsing operations can be carried out via the vertical button bar on the right_

 The zooming buttons from top to bottom are:
 * Zoom In
 * Zoom Out
 * Pan
 * Zoom to Full Extent
 * Previous Zoom
 * Zoom to Layer Extent

 _Layering can be done using the *Layers* panel on the left-handed side of the form _ 

 The layering buttons from left to right, then top to bottom are:
 * Pin to Top 

 * Add Shapefile
 * Add Image (previously downloaded images)
 * Remove All Layers
 * Remove Selected Layer

 * Turn Visible/ Invisible
 * Move to Top
 * Move Up
 * Move Down
 * Move to Bottom

== 3. Labeling or coloring shapefile shapes by their attributes ==

 * Make sure you have selected a shapefile and an attribute from the listboxes in order to perform any labeling or coloring
 * Coloring by attribute only works for a numerical attribute field (i.e. you can't color by a string/ text attribute field). Use the next topic to achieve [ArticleMap#4._Highlighting_shapefile_shapes_with_filters coloring by a string attribute field] instead

 The labeling/coloring buttons from left to right, then top to bottom are:
 * Show All Shapes (the _Spectacles_ icon)

 * Add Labels
 * Remove Labels
 * Remove All Screen Labels
 * Color Shapes by Attribute

 * When you click on the *Color Shapes by Attribute* button, shapes (track positions) will be automatically colored using the palette right beneath the _*Fields*_ listbox, using the minimum and maximum values of your selected field. 
 * *Auto* or *User* - You can specify the range of colored values by switching from *Auto* to *User* from the adjacent pull-down menu, then enter the values for `min` and `max` on both sides of the palette bar.
 * *Clear colors* - click on it to revert to the default color for all shapes, which is the *Color Square* to the left. Double-click on the *Color Square* to change and pick your own default color.

== 4. Highlighting shapefile shapes with filters ==
 * 
 *
 *

== 5. Using track positions to query tag data ==
 *
 *
 *

== 6. Obtaining satellite imagery across the Internet ==
 *
 *
 *

== 7. Showing data within a temporal window of a satellite image ==
 *
 *
 *
